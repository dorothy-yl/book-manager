<!--pages/index/index.wxml-->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-bar">
      <view class="search-icon">ğŸ”</view>
      <input class="search-input" placeholder="æœç´¢å›¾ä¹¦ã€ä½œè€…æˆ–åˆ†ç±»" bindinput="onSearchInput" bindconfirm="onSearch"/>
      <view class="search-btn" bindtap="onSearch">æœç´¢</view>
    </view>
  </view>

  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <scroll-view class="main-content" scroll-y="true">
    <!-- ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ -->
    <view class="stats-section">
      <view class="stats-grid">
        <view class="stat-card">
          <view class="stat-icon">ğŸ“š</view>
          <view class="stat-content">
            <text class="stat-number">{{totalBooks}}</text>
            <text class="stat-label">æ€»è—ä¹¦é‡</text>
          </view>
        </view>
        <view class="stat-card">
          <view class="stat-icon">ğŸ”„</view>
          <view class="stat-content">
            <text class="stat-number">{{activeExchanges}}</text>
            <text class="stat-label">æ´»è·ƒäº¤æ¢</text>
          </view>
        </view>
        <view class="stat-card">
          <view class="stat-icon">ğŸ‘¥</view>
          <view class="stat-content">
            <text class="stat-number">{{activeUsers}}</text>
            <text class="stat-label">æ´»è·ƒç”¨æˆ·</text>
          </view>
        </view>
      </view>
    </view>

    <!-- å¿«æ·åŠŸèƒ½åŒºåŸŸ -->
    <view class="quick-actions">
      <view class="section-title">å¿«æ·åŠŸèƒ½</view>
      <view class="actions-grid">
        <view class="action-item" bindtap="scanBook">
          <view class="action-icon-bg scan-bg">
            <text class="action-icon-text">ğŸ“·</text>
          </view>
          <text class="action-label">æ‰«æå›¾ä¹¦</text>
        </view>
        <view class="action-item" bindtap="addBook">
          <view class="action-icon-bg add-bg">
            <text class="action-icon-text">â•</text>
          </view>
          <text class="action-label">æ·»åŠ å›¾ä¹¦</text>
        </view>
        <view class="action-item" bindtap="browseBooks">
          <view class="action-icon-bg browse-bg">
            <text class="action-icon-text">ğŸ“–</text>
          </view>
          <text class="action-label">æµè§ˆä¹¦æ¶</text>
        </view>
        <view class="action-item" bindtap="myBooks">
          <view class="action-icon-bg my-bg">
            <text class="action-icon-text">ğŸ“‹</text>
          </view>
          <text class="action-label">æˆ‘çš„å›¾ä¹¦</text>
        </view>
      </view>
    </view>

    <!-- æ–°ä¹¦é€Ÿé€’åŒºåŸŸ -->
    <view class="new-books-section">
      <view class="section-header">
        <text class="section-title">æ–°ä¹¦é€Ÿé€’</text>
        <view class="section-more" bindtap="viewMoreBooks">
          <text class="more-text">æŸ¥çœ‹æ›´å¤š</text>
          <text class="more-icon">â†’</text>
        </view>
      </view>
      <scroll-view class="books-scroll" scroll-x="true">
        <view class="books-container">
          <view class="book-item" wx:for="{{newBooks}}" wx:key="id" bindtap="viewBookDetail" data-id="{{item.id}}">
            <view class="book-cover-container">
              <image class="book-cover" src="{{item.cover}}" mode="aspectFill"></image>
              <view class="book-status" wx:if="{{item.status === 'available'}}">å¯å€Ÿé˜…</view>
              <view class="book-status borrowed" wx:if="{{item.status === 'borrowed'}}">å·²å€Ÿå‡º</view>
            </view>
            <view class="book-info">
              <text class="book-title">{{item.title}}</text>
              <text class="book-author">{{item.author}}</text>
              <view class="book-tags">
                <text class="book-tag" wx:for="{{item.tags}}" wx:key="*this">{{item}}</text>
              </view>
            </view>
          </view>
        </view>
      </scroll-view>
    </view>

    <!-- çƒ­é—¨åˆ†ç±»åŒºåŸŸ -->
    <view class="categories-section">
      <view class="section-header">
        <text class="section-title">çƒ­é—¨åˆ†ç±»</text>
      </view>
      <view class="categories-grid">
        <view class="category-item" wx:for="{{categories}}" wx:key="id" bindtap="viewCategory" data-id="{{item.id}}">
          <view class="category-icon">{{item.icon}}</view>
          <text class="category-name">{{item.name}}</text>
          <text class="category-count">{{item.count}}æœ¬</text>
        </view>
      </view>
    </view>
  </scroll-view>
</view>


