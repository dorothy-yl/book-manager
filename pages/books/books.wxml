<!--pages/books/books.wxml-->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-bar">
      <view class="search-icon">ğŸ”</view>
      <input class="search-input" placeholder="æœç´¢ä¹¦ç±ã€ä½œè€…æˆ–åˆ†ç±»..." bindinput="onSearchInput" />
      <view class="search-btn" bindtap="onSearch">æœç´¢</view>
    </view>
  </view>

  <!-- åˆ†ç±»æ ‡ç­¾ -->
  <view class="category-tabs">
    <scroll-view class="tabs-scroll" scroll-x="true" show-scrollbar="false">
      <view class="tabs-container">
        <view class="tab {{currentTab === 'all' ? 'active' : ''}}" bindtap="switchTab" data-tab="all">
          <text class="tab-text">å…¨éƒ¨</text>
        </view>
        <view class="tab {{currentTab === 'reading' ? 'active' : ''}}" bindtap="switchTab" data-tab="reading">
          <text class="tab-text">åœ¨è¯»</text>
        </view>
        <view class="tab {{currentTab === 'finished' ? 'active' : ''}}" bindtap="switchTab" data-tab="finished">
          <text class="tab-text">å·²è¯»</text>
        </view>
        <view class="tab {{currentTab === 'wishlist' ? 'active' : ''}}" bindtap="switchTab" data-tab="wishlist">
          <text class="tab-text">æƒ³è¯»</text>
        </view>
        <view class="tab {{currentTab === 'recommend' ? 'active' : ''}}" bindtap="switchTab" data-tab="recommend">
          <text class="tab-text">æ¨è</text>
        </view>
        <view class="tab {{currentTab === 'favorite' ? 'active' : ''}}" bindtap="switchTab" data-tab="favorite">
          <text class="tab-text">æ”¶è—</text>
        </view>
        <view class="tab {{currentTab === 'recent' ? 'active' : ''}}" bindtap="switchTab" data-tab="recent">
          <text class="tab-text">æœ€è¿‘</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- ä¹¦ç±åˆ—è¡¨ -->
  <scroll-view class="books-container" scroll-y="true" enable-flex="true">
    <view class="books-list" wx:if="{{filteredBooks.length > 0}}">
      <view class="book-card" wx:for="{{filteredBooks}}" wx:key="id" bindtap="onBookTap" data-book="{{item}}">
        <!-- ä¹¦ç±å°é¢ -->
        <view class="book-cover">
          <image class="cover-image" src="{{item.cover}}" mode="aspectFill"></image>
        </view>
        
        <!-- ä¹¦ç±ä¿¡æ¯ -->
        <view class="book-info">
          <view class="book-header">
            <text class="book-title">{{item.title}}</text>
            <view class="book-actions">
              <view class="action-btn favorite-btn" bindtap="toggleFavorite" data-id="{{item.id}}" catchtap="true">
                <text class="action-icon">{{item.isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}</text>
              </view>
            </view>
          </view>
          
          <text class="book-author">{{item.author}}</text>
          
          <view class="book-meta">
            <view class="book-category">
              <text class="category-text">{{item.category}}</text>
            </view>
            <view class="book-rating">
              <text class="rating-text">â­ {{item.rating}}</text>
            </view>
          </view>
          
          <view class="book-progress" wx:if="{{item.progress}}">
            <view class="progress-bar">
              <view class="progress-fill" style="width: {{item.progress}}"></view>
            </view>
            <text class="progress-text">å·²è¯»{{item.progress}}%</text>
          </view>
          
          <view class="book-status">
            <text class="status-text {{item.status}}">{{item.statusText}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{filteredBooks.length === 0}}">
      <view class="empty-icon">ğŸ“š</view>
      <text class="empty-text">æš‚æ— ç›¸å…³ä¹¦ç±</text>
      <text class="empty-subtext">å¿«å»æ¼‚æµå›¾ä¹¦é¦†å¯»æ‰¾å¿ƒä»ªçš„ä¹¦ç±å§</text>
      <button class="empty-btn" bindtap="onAddBook">æ·»åŠ ç¬¬ä¸€æœ¬ä¹¦</button>
    </view>
  </scroll-view>

  <!-- æµ®åŠ¨æŒ‰é’® -->
  <view class="fab" bindtap="onAddBook">
    <text class="fab-icon">+</text>
  </view>
</view>